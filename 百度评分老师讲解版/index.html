<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>百度评分</title>
		<style>
			body,h1 {
				margin: 0;
				padding: 0;
				-webkit-font-smoothing: antialiased;
			}
			.starts{
				overflow:hidden;
			}
			.starts span{
				display: block;
				float: left;
				padding: 3px;
			}
		</style>
		<link rel="stylesheet" type="text/css" href="pingfen.css"/>
	</head>
	<body>
		<div class="wrap">
			<div class="baidu">
				<div class="caption">
					<h1></h1>
					<span>总体评价</span>
				</div>
				<div class="context">
					<div class="starts">
						<span>☆</span>
						<span>☆</span>
						<span>☆</span>
						<span>☆</span>
						<span>☆</span>
					</div>
					<div class="info"></div>
				</div>
				<div class="tips">
					小提示：点击星星就能打分
				</div>
			</div>
		</div>
		<!-- <script src="pingfen.js"></script> -->
		<script>
			/*
				步骤分解：
					鼠标移入
						移入到某一个元素，这个元素的左边的元素都添加红色的背景
						这个元素的右边的元素没有背景颜色
						问：怎么判断是在鼠标移入元素的左边还是右边
						答：利用下标；小于鼠标移入元素的小标的判断为左边；大于在右边；

						问：在分辨出的左边还有一个限制，小于2的时候为灰色背景
						答：

					鼠标移出
						判断是否点击了
							没有点击
								元素的背景颜色为空
							点击了
								那么要让点击的那个元素左边的所有的星星都有背景颜色
								问：怎么给点击元素的左边添加背景颜色呢？
								答：知道点击的元素的下标

					鼠标点击

						背景颜色固定，但是在鼠标移出的时候，元素的背景颜色为空了，这样是行不通的？？？
						问：怎么在鼠标移出的时候，不去掉点击后固定背景颜色？？？
						答：在鼠标移出判断是否点击了
						问：怎么判断点击了呢？
						答：定义一个标示（变量）来存一个值，如果点击的话就改变这个值
			
			*/

			var stars = document.querySelectorAll('.starts span');
			var info = document.querySelector('.info');

			var len = stars.length;

			var titles = ["评分0","评分1","评分2","评分3","评分4",]

			var isClick = 0; 
			var n = 0; 

			for( var i = 0; i < len; i++ ){
				stars[i].index = i;
				stars[i].onmouseover = function(){
					func(this.index)
					info.style.display = 'block';
					info.innerHTML = titles[this.index];
				}
				stars[i].onmouseout = function (){
					if(isClick == 0){  // 没点击
						for( var i = 0; i < len; i++ ){
							stars[i].style.color = '';	
						}
						info.style.display = 'none';
					}else{  // 点击
						func(n)
						info.innerHTML = titles[n];
					}		
				}

				stars[i].onclick = function (){
					isClick = 2; 
					n = this.index;
				}
			}

			function func(m){
				for( var j = 0; j < len; j++ ){
					// stars[j].index 每一个元素的下标
					// this.index 鼠标移入元素的下标
					if(stars[j].index <= m){  //左边
						// 鼠标移入的元素的小标是否是小于2的

						if(m < 2){
							stars[j].style.color = 'yellow';
						}else{
							stars[j].style.color = 'red';
						}

					}else{
						stars[j].style.color = '';
					}
				}	
			}



		</script>
	</body>
</html>
